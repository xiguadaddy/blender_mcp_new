2025-03-19 21:50:48,817 - BlenderMCP - INFO - ==================================================
2025-03-19 21:50:48,817 - BlenderMCP - INFO - MCP服务器启动
2025-03-19 21:50:48,817 - BlenderMCP - INFO - Python版本: 3.12.7 (main, Oct 16 2024, 00:21:24) [MSC v.1929 64 bit (AMD64)]
2025-03-19 21:50:48,817 - BlenderMCP - INFO - Python路径: D:\MCP\blender_mcp_new\.venv\Scripts\python.exe
2025-03-19 21:50:48,817 - BlenderMCP - INFO - 工作目录: D:\MCP\blender_mcp_new
2025-03-19 21:50:48,817 - BlenderMCP - INFO - MCP SDK版本信息: 未知
2025-03-19 21:50:48,817 - BlenderMCP - INFO - MCP SDK路径: D:\MCP\blender_mcp_new\.venv\Lib\site-packages\mcp\__init__.py
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG - MCP包属性:
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - CallToolRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - ClientCapabilities: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - ClientNotification: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - ClientRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - ClientResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - ClientSession: <class 'type'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - CompleteRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - CreateMessageRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - CreateMessageResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,817 - BlenderMCP - DEBUG -   - ErrorData: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - GetPromptRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - GetPromptResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - Implementation: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - IncludeContext: <class 'typing._LiteralGenericAlias'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - InitializeRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - InitializeResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - InitializedNotification: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - JSONRPCError: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - JSONRPCRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - JSONRPCResponse: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - ListPromptsRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - ListPromptsResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - ListResourcesRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - ListResourcesResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - ListToolsResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - LoggingLevel: <class 'typing._LiteralGenericAlias'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - LoggingMessageNotification: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - McpError: <class 'type'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - Notification: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - PingRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - ProgressNotification: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - PromptsCapability: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - ReadResourceRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,818 - BlenderMCP - DEBUG -   - ReadResourceResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - Resource: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - ResourceUpdatedNotification: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - ResourcesCapability: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - RootsCapability: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - SamplingMessage: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - SamplingRole: <class 'typing._LiteralGenericAlias'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - ServerCapabilities: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - ServerNotification: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - ServerRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - ServerResult: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - ServerSession: <class 'type'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - SetLevelRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - StdioServerParameters: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - StopReason: <class 'typing._UnionGenericAlias'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - SubscribeRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - Tool: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - ToolsCapability: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - UnsubscribeRequest: <class 'pydantic._internal._model_construction.ModelMetaclass'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - client: <class 'module'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - server: <class 'module'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - shared: <class 'module'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - stdio_client: <class 'function'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - stdio_server: <class 'function'>
2025-03-19 21:50:48,819 - BlenderMCP - DEBUG -   - types: <class 'module'>
2025-03-19 21:50:48,819 - BlenderMCP - INFO - ==================================================
2025-03-19 21:50:48,819 - BlenderMCP - INFO - 尝试连接到Blender IPC服务器，通信路径: port:27015
2025-03-19 21:50:48,819 - BlenderMCP.ServerCheck - INFO - 尝试连接Blender IPC服务器 localhost:27015...
2025-03-19 21:50:48,822 - BlenderMCP.ServerCheck - INFO - Blender IPC服务器在 localhost:27015 已运行
2025-03-19 21:50:48,822 - BlenderMCP.IPCClient - DEBUG - 使用端口模式，端口号: 27015
2025-03-19 21:50:48,822 - BlenderMCP.IPCClient - DEBUG - 使用端口模式，端口号: 27015
2025-03-19 21:50:48,822 - BlenderMCP - INFO - 连接尝试 1/10...
2025-03-19 21:50:48,822 - BlenderMCP.IPCClient - INFO - 正在连接到Blender IPC服务器: port:27015
2025-03-19 21:50:48,822 - BlenderMCP.IPCClient - INFO - 成功连接到Blender IPC服务器，端口: 27015
2025-03-19 21:50:48,822 - BlenderMCP - INFO - 成功连接到Blender IPC服务器
2025-03-19 21:50:48,822 - BlenderMCP - INFO - 正在创建MCP服务器...
2025-03-19 21:50:48,822 - BlenderMCP.Server - INFO - 初始化Blender MCP服务器...
2025-03-19 21:50:48,822 - mcp.server.lowlevel.server - DEBUG - Initializing server 'blender-mcp'
2025-03-19 21:50:48,822 - BlenderMCP.Server - DEBUG - 服务器实例创建成功: Server
2025-03-19 21:50:48,822 - BlenderMCP.Server - INFO - 注册资源处理程序...
2025-03-19 21:50:48,823 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-03-19 21:50:48,823 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-03-19 21:50:48,823 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-03-19 21:50:48,823 - mcp.server.lowlevel.server - DEBUG - Registering handler for SubscribeRequest
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 注册工具处理程序...
2025-03-19 21:50:48,823 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-03-19 21:50:48,823 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 注册提示处理程序...
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 检查服务器提示功能支持...
2025-03-19 21:50:48,823 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-03-19 21:50:48,823 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 成功注册提示处理程序
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器类型: Server
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 可用方法: ['call_tool', 'completion', 'create_initialization_options', 'get_capabilities', 'get_prompt', 'lifespan', 'list_prompts', 'list_resource_templates', 'list_resources', 'list_tools', 'notify_resource_updated', 'progress_notification', 'read_resource', 'run', 'set_logging_level', 'subscribe_resource', 'unsubscribe_resource']
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 检查装饰器方法...
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器具有list_tools装饰器方法
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器具有call_tool装饰器方法
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器具有list_resources装饰器方法
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器具有read_resource装饰器方法
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器具有list_prompts装饰器方法
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器具有get_prompt装饰器方法
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器具有run方法
2025-03-19 21:50:48,823 - BlenderMCP.Server - WARNING - 无法访问处理程序列表，跳过验证
2025-03-19 21:50:48,823 - BlenderMCP.Server - INFO - 服务器初始化完成
2025-03-19 21:50:48,827 - BlenderMCP - INFO - MCP服务器: 准备启动服务器
2025-03-19 21:50:48,827 - BlenderMCP - INFO - 初始化NotificationOptions...
2025-03-19 21:50:48,827 - BlenderMCP - DEBUG - 创建了具有完整功能的NotificationOptions: <mcp.server.lowlevel.server.NotificationOptions object at 0x0000021F49CA45F0>
2025-03-19 21:50:48,827 - BlenderMCP - INFO - 获取服务器能力...
2025-03-19 21:50:48,827 - BlenderMCP.Server - DEBUG - 成功获取服务器能力: experimental={'blender': {'can_render': True, 'supports_3d': True, 'supports_materials': True, 'supports_animation': True}} logging=None prompts=PromptsCapability(listChanged=True) resources=ResourcesCapability(subscribe=False, listChanged=True) tools=ToolsCapability(listChanged=True)
2025-03-19 21:50:48,827 - BlenderMCP - DEBUG - 服务器能力: experimental={'blender': {'can_render': True, 'supports_3d': True, 'supports_materials': True, 'supports_animation': True}} logging=None prompts=PromptsCapability(listChanged=True) resources=ResourcesCapability(subscribe=False, listChanged=True) tools=ToolsCapability(listChanged=True)
2025-03-19 21:50:48,827 - BlenderMCP - INFO - 服务器信息: name=blender-mcp, version=0.2.1
2025-03-19 21:50:48,827 - BlenderMCP - INFO - 创建初始化选项...
2025-03-19 21:50:48,828 - BlenderMCP - DEBUG - 初始化选项: server_name='blender-mcp' server_version='1.4.1' capabilities=ServerCapabilities(experimental={'blender': {'server_version': '0.2.1', 'protocol_version': '0.3.0', 'supports_resources': True, 'supports_tools': True, 'supports_prompts': True}}, logging=None, prompts=PromptsCapability(listChanged=True), resources=ResourcesCapability(subscribe=False, listChanged=True), tools=ToolsCapability(listChanged=True)) instructions=None
2025-03-19 21:50:48,828 - BlenderMCP - INFO - 使用协议版本: 0.3.0
2025-03-19 21:50:48,828 - BlenderMCP - INFO - 开始运行服务器...
2025-03-19 21:50:48,828 - BlenderMCP - INFO - server.run方法签名: (read_stream: 'MemoryObjectReceiveStream[types.JSONRPCMessage | Exception]', write_stream: 'MemoryObjectSendStream[types.JSONRPCMessage]', initialization_options: 'InitializationOptions', raise_exceptions: 'bool' = False)
2025-03-19 21:50:48,830 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=None, jsonrpc='2.0')
2025-03-19 21:50:48,832 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x0000021F4A0216D0>
2025-03-19 21:50:48,832 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
2025-03-19 21:50:48,832 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type ListToolsRequest
2025-03-19 21:50:48,832 - BlenderMCP.Server - INFO - 正在处理list_tools请求，准备获取工具数据...
2025-03-19 21:50:48,832 - BlenderMCP.Server - INFO - 已准备 5 个预定义工具
2025-03-19 21:50:48,832 - BlenderMCP.Server - INFO - 尝试使用MCP标准格式获取工具...
2025-03-19 21:50:48,832 - BlenderMCP.IPCClient - DEBUG - 发送请求: {'method': 'mcp/listTools', 'params': {}}
2025-03-19 21:50:48,842 - BlenderMCP.IPCClient - DEBUG - 收到响应: {'result': {'tools': [{'name': 'create_object', 'description': '在Blender中创建一个对象', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {'object_type': {'type': 'string', 'enum': ['cube', 'sphere', 'cylinder', 'plane', 'cone', 'torus'], 'description': '要创建的对象类型'}, 'name': {'type': 'string', 'description': '对象名称(可选)'}, 'location': {'type': 'array', 'items': {'type': 'number'}, 'description': '对象位置坐标 [x, y, z]'}, 'size': {'type': 'number', 'description': '对象大小'}}, 'required': ['object_type']}}, {'name': 'set_material', 'description': '为对象设置材质', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {'object_name': {'type': 'string', 'description': '目标对象名称'}, 'material_name': {'type': 'string', 'description': '材质名称（如果不提供则自动生成）'}, 'color': {'type': 'array', 'items': {'type': 'number'}, 'description': 'RGBA颜色值 [r, g, b, a]，或RGB颜色值 [r, g, b]'}, 'metallic': {'type': 'number', 'description': '金属度(0-1)'}, 'roughness': {'type': 'number', 'description': '粗糙度(0-1)'}}, 'required': ['object_name']}}, {'name': 'add_light', 'description': '添加灯光到场景', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {'light_type': {'type': 'string', 'enum': ['POINT', 'SUN', 'SPOT', 'AREA'], 'description': '灯光类型'}, 'name': {'type': 'string', 'description': '灯光名称(可选)'}, 'location': {'type': 'array', 'items': {'type': 'number'}, 'description': '灯光位置 [x, y, z]'}, 'color': {'type': 'array', 'items': {'type': 'number'}, 'description': 'RGB颜色值 [r, g, b]'}, 'energy': {'type': 'number', 'description': '灯光强度'}}, 'required': ['light_type']}}, {'name': 'set_camera', 'description': '设置相机参数', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {'camera_name': {'type': 'string', 'description': '相机名称(如果不存在则创建)'}, 'location': {'type': 'array', 'items': {'type': 'number'}, 'description': '相机位置 [x, y, z]'}, 'rotation': {'type': 'array', 'items': {'type': 'number'}, 'description': '相机旋转 [x, y, z] (弧度)'}, 'target': {'type': 'array', 'items': {'type': 'number'}, 'description': '相机目标点 [x, y, z]'}, 'lens': {'type': 'number', 'description': '镜头焦距(mm)'}}, 'required': ['camera_name']}}, {'name': 'render_scene', 'description': '渲染当前场景', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {'output_path': {'type': 'string', 'description': '输出文件路径'}, 'resolution_x': {'type': 'number', 'description': '水平分辨率'}, 'resolution_y': {'type': 'number', 'description': '垂直分辨率'}, 'engine': {'type': 'string', 'enum': ['CYCLES', 'BLENDER_EEVEE', 'WORKBENCH'], 'description': '渲染引擎'}}, 'required': ['output_path']}}, {'name': 'execute_python', 'description': '执行Python代码', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {'code': {'type': 'string', 'description': '要执行的Python代码'}}, 'required': ['code']}}, {'name': 'create_text', 'description': '创建3D文本', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_curve', 'description': '创建曲线', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'duplicate_object', 'description': '复制对象', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'transform_object', 'description': '转换对象位置、旋转或缩放', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'set_vertex_position', 'description': '设置顶点位置', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'set_object_parent', 'description': '设置对象的父级对象', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'rename_object', 'description': '重命名对象', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'get_object_info', 'description': '获取对象的详细信息', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'list_objects', 'description': '列出场景中的对象', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'delete_object', 'description': '删除对象', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_node_material', 'description': '创建节点材质', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'duplicate_material', 'description': '复制材质', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'get_material_info', 'description': '获取材质信息', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'list_materials', 'description': '列出所有材质', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'update_material_property', 'description': '更新材质属性', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'rename_material', 'description': '重命名材质', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'delete_material', 'description': '删除材质', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'advanced_lighting', 'description': '高级照明设置', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'update_light', 'description': '更新灯光属性', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'get_light_info', 'description': '获取灯光信息', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'list_lights', 'description': '列出场景中的所有灯光', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'delete_light', 'description': '删除灯光', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'add_camera', 'description': '添加相机到场景', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'update_camera', 'description': '更新相机属性', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'get_camera_info', 'description': '获取相机信息', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'list_cameras', 'description': '列出场景中的所有相机', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'delete_camera', 'description': '删除相机', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'setup_scene_environment', 'description': '设置场景环境', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'get_scene_info', 'description': '获取场景信息', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'update_scene', 'description': '更新场景属性', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'export_scene', 'description': '导出场景到文件', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'import_file', 'description': '导入文件到场景', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_collection', 'description': '创建新的集合', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'list_collections', 'description': '列出场景中的所有集合', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'delete_collection', 'description': '删除集合', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'extrude_faces', 'description': '挤出选定的面', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'subdivide_mesh', 'description': '细分网格', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'loop_cut', 'description': '环切操作', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'boolean_operation', 'description': '执行布尔操作', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'apply_modifier', 'description': '应用修改器到对象', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'remove_modifier', 'description': '从对象中移除修改器', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'knife_cut', 'description': '刀切工具', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_geometry_nodes', 'description': '创建几何节点修改器', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'join_objects', 'description': '连接多个物体', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'separate_mesh', 'description': '分离网格', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_keyframe_animation', 'description': '创建关键帧动画', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'clear_animation_data', 'description': '清除动画数据', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'set_keyframe_interpolation', 'description': '设置关键帧插值方式', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'set_frame_range', 'description': '设置和获取帧范围', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'get_frame_range', 'description': '获取帧范围', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_armature', 'description': '创建骨骼', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_rig', 'description': '创建装备 (简易方法，可以扩展为更复杂的自动绑定)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'add_ik_constraint', 'description': '添加IK约束', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'set_pose_library', 'description': '设置姿态库 (占位符，具体实现姿态库操作会更复杂)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_motion_path', 'description': '创建运动路径', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'set_object_follow_path', 'description': '设置物体跟随路径 (使用约束)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'simulate_cloth_physics', 'description': '布料模拟 (简易方法，直接添加布料修改器)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'simulate_rigid_body_physics', 'description': '刚体动画', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'simulate_soft_body_physics', 'description': '柔体动画 (简易方法，直接添加柔体修改器)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_shape_key_animation', 'description': '形态键动画 (基础功能，可以扩展为更精细的控制)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_sound_driven_animation', 'description': '声音驱动动画 (占位符, 声音驱动动画通常需要更复杂的设置)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'control_nla_editor', 'description': 'NLA编辑器控制 (占位符, NLA编辑器的控制涉及复杂的strip操作)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_particle_system', 'description': '创建粒子系统', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'modify_particle_system', 'description': '修改粒子系统属性 (占位符，可以扩展更多属性)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_smoke_domain', 'description': '创建烟雾域', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'modify_smoke_domain', 'description': '修改烟雾域属性 (占位符，可以扩展更多属性)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'create_fluid_domain', 'description': '创建流体域 (占位符，流体模拟设置非常复杂)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'modify_fluid_domain', 'description': '修改流体域属性 (占位符，流体模拟属性非常多)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'get_compositing_node_tree', 'description': '获取合成节点树 (占位符，需要考虑如何序列化节点树)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'add_compositing_node', 'description': '添加合成节点 (占位符，需要定义节点类型和属性)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}, {'name': 'connect_compositing_nodes', 'description': '连接合成节点 (占位符，需要指定节点和插槽)', 'version': '1.0', 'input_schema': {'type': 'object', 'properties': {}, 'required': []}}]}}
2025-03-19 21:50:48,842 - BlenderMCP.Server - DEBUG - 从Blender获取到 77 个额外工具
2025-03-19 21:50:48,842 - BlenderMCP.Server - INFO - 最终返回 77 个可用工具
2025-03-19 21:50:48,845 - mcp.server.lowlevel.server - DEBUG - Response sent
2025-03-19 21:51:02,405 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x0000021F477605F0>
2025-03-19 21:51:02,405 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-03-19 21:51:02,405 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2025-03-19 21:51:02,405 - BlenderMCP.Server - DEBUG - 调用工具: execute_python，参数: {'code': 'import bpy\n\n# 清除场景中的默认物体\nbpy.ops.object.select_all(action=\'SELECT\')\nbpy.ops.object.delete()\n\n# 步骤1：创建船体\nbpy.ops.mesh.primitive_cube_add(size=2, location=(0, 0, 0))\nship_hull = bpy.context.active_object\nship_hull.name = "船体"\n\n# 转到编辑模式\nbpy.ops.object.mode_set(mode=\'EDIT\')\n\n# 添加水平分段\nbpy.ops.mesh.loopcut_slide(number_cuts=3)\nbpy.ops.object.mode_set(mode=\'OBJECT\')\n\n# 步骤2：添加主桅杆\nbpy.ops.mesh.primitive_cylinder_add(radius=0.05, depth=3, location=(0, 0, 1.5))\nmain_mast = bpy.context.active_object\nmain_mast.name = "主桅杆"\n\n# 步骤3：添加前桅杆\nbpy.ops.mesh.primitive_cylinder_add(radius=0.04, depth=2.5, location=(0, 0.7, 1.3))\nfront_mast = bpy.context.active_object\nfront_mast.name = "前桅杆"\n\n# 步骤4：添加横杆\nbpy.ops.mesh.primitive_cylinder_add(radius=0.03, depth=1.2, location=(0, 0, 2))\nyard = bpy.context.active_object\nyard.name = "横杆1"\nyard.rotation_euler[0] = 1.5708  # 90度，使其水平\n\n# 添加第二个横杆\nbpy.ops.mesh.primitive_cylinder_add(radius=0.025, depth=1, location=(0, 0.7, 1.8))\nyard2 = bpy.context.active_object\nyard2.name = "横杆2"\nyard2.rotation_euler[0] = 1.5708  # 90度，使其水平\n\n# 步骤5：创建帆\nbpy.ops.mesh.primitive_plane_add(size=1, location=(0, -0.2, 2))\nmain_sail = bpy.context.active_object\nmain_sail.name = "主帆"\nmain_sail.rotation_euler[0] = 0.1  # 轻微倾斜\n\n# 添加前帆\nbpy.ops.mesh.primitive_plane_add(size=0.8, location=(0, 0.5, 1.8))\nfront_sail = bpy.context.active_object\nfront_sail.name = "前帆"\nfront_sail.rotation_euler[0] = 0.15  # 轻微倾斜\n\n# 步骤6：添加简单材质\n# 创建木质材料\nwood_material = bpy.data.materials.new(name="木质")\nwood_material.diffuse_color = (0.4, 0.2, 0.1, 1.0)  # 棕色\n\n# 创建帆布材料\nsail_material = bpy.data.materials.new(name="帆布")\nsail_material.diffuse_color = (0.9, 0.9, 0.8, 1.0)  # 灰白色\n\n# 应用材质\nship_hull.active_material = wood_material\nmain_mast.active_material = wood_material\nfront_mast.active_material = wood_material\nyard.active_material = wood_material\nyard2.active_material = wood_material\nmain_sail.active_material = sail_material\nfront_sail.active_material = sail_material\n\n# 步骤7：添加水面\nbpy.ops.mesh.primitive_plane_add(size=10, location=(0, 0, -0.1))\nocean = bpy.context.active_object\nocean.name = "海面"\n\n# 创建水材质\nwater_material = bpy.data.materials.new(name="水")\nwater_material.diffuse_color = (0.1, 0.3, 0.5, 0.8)  # 蓝色半透明\nocean.active_material = water_material\n\n# 步骤8：添加相机和光源\nbpy.ops.object.camera_add(location=(4, -4, 3))\ncamera = bpy.context.active_object\ncamera.rotation_euler = (0.9, 0, 0.8)\nbpy.context.scene.camera = camera\n\nbpy.ops.object.light_add(type=\'SUN\', location=(0, 0, 5))\nsun = bpy.context.active_object\nsun.rotation_euler = (0.5, 0.2, 0)\n\nprint("帆船模型创建完成!")'}
2025-03-19 21:51:02,405 - BlenderMCP.Server - INFO - 发送工具请求到Blender: execute_python
2025-03-19 21:51:02,405 - BlenderMCP.IPCClient - DEBUG - 发送请求: {'action': 'call_tool', 'tool': 'execute_python', 'arguments': {'code': 'import bpy\n\n# 清除场景中的默认物体\nbpy.ops.object.select_all(action=\'SELECT\')\nbpy.ops.object.delete()\n\n# 步骤1：创建船体\nbpy.ops.mesh.primitive_cube_add(size=2, location=(0, 0, 0))\nship_hull = bpy.context.active_object\nship_hull.name = "船体"\n\n# 转到编辑模式\nbpy.ops.object.mode_set(mode=\'EDIT\')\n\n# 添加水平分段\nbpy.ops.mesh.loopcut_slide(number_cuts=3)\nbpy.ops.object.mode_set(mode=\'OBJECT\')\n\n# 步骤2：添加主桅杆\nbpy.ops.mesh.primitive_cylinder_add(radius=0.05, depth=3, location=(0, 0, 1.5))\nmain_mast = bpy.context.active_object\nmain_mast.name = "主桅杆"\n\n# 步骤3：添加前桅杆\nbpy.ops.mesh.primitive_cylinder_add(radius=0.04, depth=2.5, location=(0, 0.7, 1.3))\nfront_mast = bpy.context.active_object\nfront_mast.name = "前桅杆"\n\n# 步骤4：添加横杆\nbpy.ops.mesh.primitive_cylinder_add(radius=0.03, depth=1.2, location=(0, 0, 2))\nyard = bpy.context.active_object\nyard.name = "横杆1"\nyard.rotation_euler[0] = 1.5708  # 90度，使其水平\n\n# 添加第二个横杆\nbpy.ops.mesh.primitive_cylinder_add(radius=0.025, depth=1, location=(0, 0.7, 1.8))\nyard2 = bpy.context.active_object\nyard2.name = "横杆2"\nyard2.rotation_euler[0] = 1.5708  # 90度，使其水平\n\n# 步骤5：创建帆\nbpy.ops.mesh.primitive_plane_add(size=1, location=(0, -0.2, 2))\nmain_sail = bpy.context.active_object\nmain_sail.name = "主帆"\nmain_sail.rotation_euler[0] = 0.1  # 轻微倾斜\n\n# 添加前帆\nbpy.ops.mesh.primitive_plane_add(size=0.8, location=(0, 0.5, 1.8))\nfront_sail = bpy.context.active_object\nfront_sail.name = "前帆"\nfront_sail.rotation_euler[0] = 0.15  # 轻微倾斜\n\n# 步骤6：添加简单材质\n# 创建木质材料\nwood_material = bpy.data.materials.new(name="木质")\nwood_material.diffuse_color = (0.4, 0.2, 0.1, 1.0)  # 棕色\n\n# 创建帆布材料\nsail_material = bpy.data.materials.new(name="帆布")\nsail_material.diffuse_color = (0.9, 0.9, 0.8, 1.0)  # 灰白色\n\n# 应用材质\nship_hull.active_material = wood_material\nmain_mast.active_material = wood_material\nfront_mast.active_material = wood_material\nyard.active_material = wood_material\nyard2.active_material = wood_material\nmain_sail.active_material = sail_material\nfront_sail.active_material = sail_material\n\n# 步骤7：添加水面\nbpy.ops.mesh.primitive_plane_add(size=10, location=(0, 0, -0.1))\nocean = bpy.context.active_object\nocean.name = "海面"\n\n# 创建水材质\nwater_material = bpy.data.materials.new(name="水")\nwater_material.diffuse_color = (0.1, 0.3, 0.5, 0.8)  # 蓝色半透明\nocean.active_material = water_material\n\n# 步骤8：添加相机和光源\nbpy.ops.object.camera_add(location=(4, -4, 3))\ncamera = bpy.context.active_object\ncamera.rotation_euler = (0.9, 0, 0.8)\nbpy.context.scene.camera = camera\n\nbpy.ops.object.light_add(type=\'SUN\', location=(0, 0, 5))\nsun = bpy.context.active_object\nsun.rotation_euler = (0.5, 0.2, 0)\n\nprint("帆船模型创建完成!")'}}
2025-03-19 21:51:02,412 - BlenderMCP.IPCClient - DEBUG - 收到响应: {'error': "执行Python代码时出错: 'Context' object has no attribute 'active_object'"}
2025-03-19 21:51:02,412 - BlenderMCP.Server - DEBUG - 从Blender收到的原始响应: {'error': "执行Python代码时出错: 'Context' object has no attribute 'active_object'"}
2025-03-19 21:51:02,412 - BlenderMCP.Server - ERROR - 调用工具出错: 执行Python代码时出错: 'Context' object has no attribute 'active_object'
2025-03-19 21:51:02,412 - BlenderMCP.Server - DEBUG - 使用字典构建错误响应: {'isError': True, 'errorMessage': "执行Python代码时出错: 'Context' object has no attribute 'active_object'", 'content': [{'type': 'text', 'text': "工具 execute_python 执行失败: 执行Python代码时出错: 'Context' object has no attribute 'active_object'"}]}
2025-03-19 21:51:02,413 - mcp.server.lowlevel.server - DEBUG - Response sent
2025-03-19 21:51:28,071 - BlenderMCP.IPCClient - INFO - 断开连接...
